import{At as e,Cn as t,Ct as n,Dt as r,Et as i,Jt as a,Kt as o,Mt as s,Nt as c,On as l,Ot as u,hn as d,in as f,jt as p,kt as m,tn as h,xt as g}from"./game-logic-CfBcTF_c.js";import"./vendor-pinia-DP9x75p8.js";import"./vendor-crypto-Ce_BCn-h.js";import"./game-i18n-DEf7ySVe.js";import"./vendor-others-CUjrprN5.js";import"./vendor-reka-ui-CZQh7FLl.js";import"./vendor-utils-Dg-HLkEU.js";import"./vendor-vueuse-C7EbLx--.js";import{I as _,c as v,n as y}from"./vendor-icons-W6Ny__75.js";import"./TooltipProvider-BAp4BAXy.js";import{t as b}from"./CardDescription-D2AN1hhX.js";import"./game-config-D-D7cMgJ.js";import{A as x,F as S,I as C,M as w,P as T,S as E,b as D,c as O,l as k,n as A,r as j,s as M,u as N,v as P,w as F,x as I,y as L}from"./index-DWmvUlvu.js";import{t as R}from"./useGameConfig-B5wf1i8i.js";import{t as z}from"./BattleReportDialog-CWBu6H63.js";var B={key:0,class:`space-y-4`},V={class:`p-3 bg-muted rounded-lg`},H={class:`text-sm font-medium mb-2`},U={key:0,class:`text-xs text-muted-foreground`},W={key:1,class:`text-xs text-muted-foreground`},ee={class:`text-sm font-medium mb-2`},te={class:`flex flex-wrap gap-3 text-xs sm:text-sm`},G={class:`flex items-center gap-1`},K={class:`flex items-center gap-1`},q={class:`flex items-center gap-1`},J={class:`flex items-center gap-1`},Y={key:0},X={class:`text-sm font-medium mb-2`},Z={class:`grid grid-cols-2 sm:grid-cols-3 gap-2 text-xs sm:text-sm`},ne={class:`text-muted-foreground`},re={class:`ml-1 font-medium`},ie={key:1},ae={class:`text-sm font-medium mb-2`},oe={class:`grid grid-cols-2 sm:grid-cols-3 gap-2 text-xs sm:text-sm`},se={key:0,class:`block`},ce={class:`text-muted-foreground`},le={class:`ml-1 font-medium`},ue={key:2},de={class:`text-sm font-medium mb-2`},fe={class:`grid grid-cols-2 sm:grid-cols-3 gap-2 text-xs sm:text-sm`},pe={class:`text-muted-foreground`},me={class:`ml-1 font-medium`},Q=c({__name:`SpyReportDialog`,props:{report:{},open:{type:Boolean}},emits:[`update:open`],setup(c,{emit:g}){let v=c,y=g,b=C(),x=S(),{t:w}=T(),{SHIPS:O,DEFENSES:k,BUILDINGS:M}=R(),N=d(v.open),z=i(()=>v.report?b.player.planets.find(e=>e.id===v.report.targetPlanetId)||Object.values(x.planets).find(e=>e.id===v.report.targetPlanetId):null);h(()=>v.open,e=>{N.value=e}),h(N,e=>{y(`update:open`,e)});let Q=e=>e?Object.values(e).some(e=>e>0):!1;return(i,d)=>(o(),u(t(E),{open:N.value,"onUpdate:open":d[0]||=e=>N.value=e},{default:f(()=>[s(t(I),{class:`max-w-2xl max-h-[90vh] overflow-y-auto`},{default:f(()=>[s(t(L),null,{default:f(()=>[s(t(P),{class:`flex items-center gap-2`},{default:f(()=>[s(t(_),{class:`h-5 w-5`}),p(` `+l(t(w)(`messagesView.spyReport`)),1)]),_:1}),c.report?(o(),u(t(D),{key:0},{default:f(()=>[p(l(t(A)(c.report.timestamp)),1)]),_:1})):m(``,!0)]),_:1}),c.report?(o(),e(`div`,B,[r(`div`,V,[r(`p`,H,l(t(w)(`messagesView.targetPlanet`)),1),z.value?(o(),e(`p`,U,l(z.value.name)+` [`+l(z.value.position.galaxy)+`:`+l(z.value.position.system)+`:`+l(z.value.position.position)+`] `,1)):(o(),e(`p`,W,l(c.report.targetPlanetId),1))]),r(`div`,null,[r(`p`,ee,l(t(w)(`messagesView.resources`))+`:`,1),r(`div`,te,[r(`span`,G,[s(F,{type:`metal`,size:`sm`}),p(` `+l(t(j)(c.report.resources.metal)),1)]),r(`span`,K,[s(F,{type:`crystal`,size:`sm`}),p(` `+l(t(j)(c.report.resources.crystal)),1)]),r(`span`,q,[s(F,{type:`deuterium`,size:`sm`}),p(` `+l(t(j)(c.report.resources.deuterium)),1)]),r(`span`,J,[s(F,{type:`darkMatter`,size:`sm`}),p(` `+l(t(j)(c.report.resources.darkMatter)),1)])])]),c.report.fleet&&Object.keys(c.report.fleet).length>0?(o(),e(`div`,Y,[r(`p`,X,l(t(w)(`messagesView.fleet`))+`:`,1),r(`div`,Z,[(o(!0),e(n,null,a(c.report.fleet,(n,i)=>(o(),e(`div`,{key:i},[r(`span`,ne,l(t(O)[i].name)+`:`,1),r(`span`,re,l(n),1)]))),128))])])):m(``,!0),c.report.defense&&Q(c.report.defense)?(o(),e(`div`,ie,[r(`p`,ae,l(t(w)(`messagesView.defense`))+`:`,1),r(`div`,oe,[(o(!0),e(n,null,a(c.report.defense,(n,i)=>(o(),e(`div`,{key:i},[n&&n>0?(o(),e(`span`,se,[r(`span`,ce,l(t(k)[i].name)+`:`,1),r(`span`,le,l(n),1)])):m(``,!0)]))),128))])])):m(``,!0),c.report.buildings&&Object.keys(c.report.buildings).length>0?(o(),e(`div`,ue,[r(`p`,de,l(t(w)(`messagesView.buildings`))+`:`,1),r(`div`,fe,[(o(!0),e(n,null,a(c.report.buildings,(n,i)=>(o(),e(`div`,{key:i},[r(`span`,pe,l(t(M)[i].name)+`:`,1),r(`span`,me,`Lv.`+l(n),1)]))),128))])])):m(``,!0)])):m(``,!0)]),_:1})]),_:1},8,[`open`]))}}),he={class:`container mx-auto p-4 sm:p-6 space-y-6`},ge={class:`text-2xl sm:text-3xl font-bold`},_e={class:`flex gap-2 border-b`},ve={key:0,class:`space-y-2`},ye={class:`flex justify-between items-center gap-2`},$={class:`flex items-center gap-2 min-w-0 flex-1`},be={key:1,class:`space-y-2`},xe={class:`flex justify-between items-center gap-2`},Se={class:`flex items-center gap-2 min-w-0 flex-1`},Ce=c({__name:`MessagesView`,setup(c){let h=C(),{t:S}=T(),E=d(`battles`),D=d(!1),j=d(!1),P=d(null),F=d(null),I=i(()=>[...h.player.battleReports].sort((e,t)=>t.timestamp-e.timestamp)),L=i(()=>[...h.player.spyReports].sort((e,t)=>t.timestamp-e.timestamp)),R=i(()=>h.player.battleReports.filter(e=>!e.read).length),B=i(()=>h.player.spyReports.filter(e=>!e.read).length),V=e=>{P.value=e,D.value=!0,e.read||=!0},H=e=>{F.value=e,j.value=!0,e.read||=!0},U=e=>{let t=h.player.battleReports.findIndex(t=>t.id===e);t>-1&&h.player.battleReports.splice(t,1)},W=e=>{let t=h.player.spyReports.findIndex(t=>t.id===e);t>-1&&h.player.spyReports.splice(t,1)};return(i,c)=>(o(),e(`div`,he,[r(`h1`,ge,l(t(S)(`messagesView.title`)),1),r(`div`,_e,[s(t(w),{onClick:c[0]||=e=>E.value=`battles`,variant:E.value===`battles`?`default`:`ghost`,class:`rounded-b-none`},{default:f(()=>[s(t(v),{class:`h-4 w-4 mr-2`}),p(` `+l(t(S)(`messagesView.battles`))+` `,1),R.value>0?(o(),u(t(x),{key:0,variant:`destructive`,class:`ml-2`},{default:f(()=>[p(l(R.value),1)]),_:1})):m(``,!0)]),_:1},8,[`variant`]),s(t(w),{onClick:c[1]||=e=>E.value=`spy`,variant:E.value===`spy`?`default`:`ghost`,class:`rounded-b-none`},{default:f(()=>[s(t(_),{class:`h-4 w-4 mr-2`}),p(` `+l(t(S)(`messagesView.spy`))+` `,1),B.value>0?(o(),u(t(x),{key:0,variant:`destructive`,class:`ml-2`},{default:f(()=>[p(l(B.value),1)]),_:1})):m(``,!0)]),_:1},8,[`variant`])]),E.value===`battles`?(o(),e(`div`,ve,[t(h).player.battleReports.length===0?(o(),u(t(N),{key:0},{default:f(()=>[s(t(k),{class:`py-8 text-center text-muted-foreground`},{default:f(()=>[p(l(t(S)(`messagesView.noBattleReports`)),1)]),_:1})]),_:1})):m(``,!0),(o(!0),e(n,null,a(I.value,e=>(o(),u(t(N),{key:e.id,onClick:t=>V(e),class:`cursor-pointer hover:shadow-md transition-shadow`},{default:f(()=>[s(t(O),{class:`pb-3`},{default:f(()=>[r(`div`,ye,[r(`div`,$,[s(t(v),{class:`h-4 w-4 flex-shrink-0`}),s(t(M),{class:`text-base sm:text-lg`},{default:f(()=>[p(l(t(S)(`messagesView.battleReport`)),1)]),_:1}),e.read?m(``,!0):(o(),u(t(x),{key:0,variant:`default`,class:`text-xs`},{default:f(()=>[p(l(t(S)(`messagesView.unread`)),1)]),_:1})),s(t(x),{variant:e.winner===`attacker`?`default`:e.winner===`defender`?`destructive`:`secondary`,class:`text-xs`},{default:f(()=>[p(l(e.winner===`attacker`?t(S)(`messagesView.victory`):e.winner===`defender`?t(S)(`messagesView.defeat`):t(S)(`messagesView.draw`)),1)]),_:2},1032,[`variant`])]),s(t(w),{onClick:g(t=>U(e.id),[`stop`]),variant:`ghost`,size:`icon`,class:`h-8 w-8 flex-shrink-0`},{default:f(()=>[s(t(y),{class:`h-4 w-4`})]),_:1},8,[`onClick`])]),s(t(b),{class:`text-xs sm:text-sm`},{default:f(()=>[p(l(t(A)(e.timestamp)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,[`onClick`]))),128))])):m(``,!0),E.value===`spy`?(o(),e(`div`,be,[t(h).player.spyReports.length===0?(o(),u(t(N),{key:0},{default:f(()=>[s(t(k),{class:`py-8 text-center text-muted-foreground`},{default:f(()=>[p(l(t(S)(`messagesView.noSpyReports`)),1)]),_:1})]),_:1})):m(``,!0),(o(!0),e(n,null,a(L.value,e=>(o(),u(t(N),{key:e.id,onClick:t=>H(e),class:`cursor-pointer hover:shadow-md transition-shadow`},{default:f(()=>[s(t(O),{class:`pb-3`},{default:f(()=>[r(`div`,xe,[r(`div`,Se,[s(t(_),{class:`h-4 w-4 flex-shrink-0`}),s(t(M),{class:`text-base sm:text-lg`},{default:f(()=>[p(l(t(S)(`messagesView.spyReport`)),1)]),_:1}),e.read?m(``,!0):(o(),u(t(x),{key:0,variant:`default`,class:`text-xs`},{default:f(()=>[p(l(t(S)(`messagesView.unread`)),1)]),_:1})),s(t(x),{variant:`outline`,class:`text-xs`},{default:f(()=>[p(l(e.targetPlanetId),1)]),_:2},1024)]),s(t(w),{onClick:g(t=>W(e.id),[`stop`]),variant:`ghost`,size:`icon`,class:`h-8 w-8 flex-shrink-0`},{default:f(()=>[s(t(y),{class:`h-4 w-4`})]),_:1},8,[`onClick`])]),s(t(b),{class:`text-xs sm:text-sm`},{default:f(()=>[p(l(t(A)(e.timestamp)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,[`onClick`]))),128))])):m(``,!0),s(z,{open:D.value,"onUpdate:open":c[2]||=e=>D.value=e,report:P.value},null,8,[`open`,`report`]),s(Q,{open:j.value,"onUpdate:open":c[3]||=e=>j.value=e,report:F.value},null,8,[`open`,`report`])]))}});export{Ce as default};