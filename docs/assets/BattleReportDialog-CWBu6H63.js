import{At as e,Cn as t,Ct as n,Dt as r,Et as i,Jt as a,Kt as o,Mt as s,Nt as c,On as l,Ot as u,Tn as ee,hn as d,in as f,jt as p,kt as m,tn as h}from"./game-logic-CfBcTF_c.js";import{a as te,c as ne,p as re}from"./vendor-icons-W6Ny__75.js";import{t as g}from"./TooltipProvider-BAp4BAXy.js";import{D as _,E as v,F as ie,I as ae,M as oe,P as se,S as ce,T as y,b as le,n as ue,r as b,v as de,w as x,x as S,y as C}from"./index-DWmvUlvu.js";import{t as w}from"./useGameConfig-B5wf1i8i.js";var T={key:0,class:`space-y-4`},E={class:`grid grid-cols-1 md:grid-cols-2 gap-4 text-sm`},D={class:`p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg`},O={class:`font-medium text-blue-600 dark:text-blue-400 mb-1`},k={key:0,class:`text-xs text-muted-foreground`},A={key:1,class:`text-xs text-muted-foreground`},j={class:`p-3 bg-red-50 dark:bg-red-950/20 rounded-lg`},M={class:`font-medium text-red-600 dark:text-red-400 mb-1`},N={key:0,class:`text-xs text-muted-foreground`},P={key:1,class:`text-xs text-muted-foreground`},F={class:`text-lg font-bold`},I={key:0,class:`text-sm mt-1`},L={class:`grid grid-cols-1 md:grid-cols-2 gap-4`},R={class:`space-y-2`},z={class:`text-sm font-medium text-red-600 dark:text-red-400`},B={class:`p-3 bg-muted rounded-lg space-y-1 text-xs`},V={class:`text-muted-foreground`},H={class:`ml-2 font-medium`},fe={key:0,class:`text-muted-foreground`},pe={class:`space-y-2`},me={class:`text-sm font-medium text-red-600 dark:text-red-400`},he={class:`p-3 bg-muted rounded-lg space-y-1 text-xs`},ge={class:`text-muted-foreground`},_e={class:`ml-2 font-medium`},ve={class:`text-muted-foreground`},ye={class:`ml-2 font-medium`},be={key:0,class:`text-muted-foreground`},xe={key:0,class:`grid grid-cols-1 md:grid-cols-2 gap-4`},Se={key:0,class:`space-y-2`},Ce={class:`text-sm font-medium text-blue-600 dark:text-blue-400`},we={class:`p-3 bg-muted rounded-lg space-y-1 text-xs`},Te={class:`text-muted-foreground`},Ee={class:`ml-2 font-medium`},De={key:1,class:`space-y-2`},Oe={class:`text-sm font-medium text-blue-600 dark:text-blue-400`},ke={class:`p-3 bg-muted rounded-lg space-y-1 text-xs`},Ae={class:`text-muted-foreground`},je={class:`ml-2 font-medium`},Me={class:`text-muted-foreground`},Ne={class:`ml-2 font-medium`},Pe={class:`grid grid-cols-1 md:grid-cols-2 gap-4`},Fe={key:0,class:`p-3 bg-green-50 dark:bg-green-950 rounded-lg`},Ie={class:`text-sm font-medium mb-2 text-green-600 dark:text-green-400`},Le={class:`flex flex-wrap gap-3 text-xs`},Re={key:0,class:`flex items-center gap-1`},ze={key:1,class:`flex items-center gap-1`},Be={key:2,class:`flex items-center gap-1`},Ve={key:1,class:`p-3 bg-muted rounded-lg`},He={class:`text-sm font-medium mb-2`},Ue={class:`flex flex-wrap gap-3 text-xs`},We={key:0,class:`flex items-center gap-1`},Ge={key:1,class:`flex items-center gap-1`},Ke={key:0,class:`text-xs text-muted-foreground mt-2`},qe={key:1,class:`space-y-2`},Je={key:0,class:`relative pl-6 space-y-4`},Ye={class:`border rounded-lg p-3 bg-card hover:shadow-md transition-shadow`},Xe={class:`flex items-center justify-between mb-3`},Ze={class:`text-sm font-semibold`},Qe={class:`flex gap-3 text-xs text-muted-foreground`},$e={class:`flex items-center gap-1`},et={class:`flex items-center gap-1`},tt={class:`grid grid-cols-1 md:grid-cols-2 gap-3`},nt={class:`bg-red-50 dark:bg-red-950/20 rounded p-2`},rt={class:`text-xs font-medium text-red-600 dark:text-red-400 mb-1.5`},it={class:`text-xs space-y-0.5`},at={class:`text-muted-foreground`},ot={class:`font-medium`},st={key:0,class:`text-muted-foreground italic`},ct={class:`bg-blue-50 dark:bg-blue-950/20 rounded p-2`},lt={class:`text-xs font-medium text-blue-600 dark:text-blue-400 mb-1.5`},ut={class:`text-xs space-y-0.5`},dt={class:`text-muted-foreground`},U={class:`font-medium`},ft={class:`text-muted-foreground`},pt={class:`font-medium`},mt={key:0,class:`text-muted-foreground italic`},W=c({__name:`BattleReportDialog`,props:{report:{},open:{type:Boolean}},emits:[`update:open`],setup(c,{emit:W}){let G=c,ht=W,K=ae(),gt=ie(),{t:q}=se(),{SHIPS:J,DEFENSES:Y}=w(),X=d(G.open),Z=d(!1),Q=i(()=>G.report?K.player.planets.find(e=>e.id===G.report.attackerPlanetId):null),$=i(()=>G.report?K.player.planets.find(e=>e.id===G.report.defenderPlanetId)||Object.values(gt.planets).find(e=>e.id===G.report.defenderPlanetId):null);h(()=>G.open,e=>{X.value=e,e&&(Z.value=!1)}),h(X,e=>{ht(`update:open`,e)});let _t=e=>e===`attacker`?`bg-green-50 dark:bg-green-950 text-green-700 dark:text-green-300`:e===`defender`?`bg-red-50 dark:bg-red-950 text-red-700 dark:text-red-300`:`bg-gray-50 dark:bg-gray-950 text-gray-700 dark:text-gray-300`;return(i,d)=>(o(),u(t(ce),{open:X.value,"onUpdate:open":d[1]||=e=>X.value=e},{default:f(()=>[s(t(S),{class:`max-w-4xl max-h-[90vh] overflow-y-auto`},{default:f(()=>[s(t(C),null,{default:f(()=>[s(t(de),{class:`flex items-center gap-2`},{default:f(()=>[s(t(te),{class:`h-5 w-5`}),p(` `+l(t(q)(`messagesView.battleReport`)),1)]),_:1}),c.report?(o(),u(t(le),{key:0},{default:f(()=>[p(l(t(ue)(c.report.timestamp)),1)]),_:1})):m(``,!0)]),_:1}),c.report?(o(),e(`div`,T,[r(`div`,E,[r(`div`,D,[r(`p`,O,l(t(q)(`simulatorView.attacker`)),1),Q.value?(o(),e(`p`,k,l(Q.value.name)+` [`+l(Q.value.position.galaxy)+`:`+l(Q.value.position.system)+`:`+l(Q.value.position.position)+`] `,1)):(o(),e(`p`,A,l(c.report.attackerPlanetId),1))]),r(`div`,j,[r(`p`,M,l(t(q)(`simulatorView.defender`)),1),$.value?(o(),e(`p`,N,l($.value.name)+` [`+l($.value.position.galaxy)+`:`+l($.value.position.system)+`:`+l($.value.position.position)+`] `,1)):(o(),e(`p`,P,l(c.report.defenderPlanetId),1))])]),r(`div`,{class:ee([`text-center p-4 rounded-lg`,_t(c.report.winner)])},[r(`p`,F,l(c.report.winner===`attacker`?t(q)(`messagesView.victory`):c.report.winner===`defender`?t(q)(`messagesView.defeat`):t(q)(`messagesView.draw`)),1),c.report.rounds?(o(),e(`p`,I,l(t(q)(`simulatorView.afterRounds`).replace(`{rounds}`,String(c.report.rounds))),1)):m(``,!0)],2),r(`div`,L,[r(`div`,R,[r(`p`,z,l(t(q)(`messagesView.attackerLosses`)),1),r(`div`,B,[(o(!0),e(n,null,a(c.report.attackerLosses,(n,i)=>(o(),e(`div`,{key:i},[r(`span`,V,l(t(J)[i].name)+`:`,1),r(`span`,H,l(n),1)]))),128)),Object.keys(c.report.attackerLosses).length===0?(o(),e(`p`,fe,l(t(q)(`messagesView.noLosses`)),1)):m(``,!0)])]),r(`div`,pe,[r(`p`,me,l(t(q)(`messagesView.defenderLosses`)),1),r(`div`,he,[(o(!0),e(n,null,a(c.report.defenderLosses.fleet,(n,i)=>(o(),e(`div`,{key:i},[r(`span`,ge,l(t(J)[i].name)+`:`,1),r(`span`,_e,l(n),1)]))),128)),(o(!0),e(n,null,a(c.report.defenderLosses.defense,(n,i)=>(o(),e(`div`,{key:i},[r(`span`,ve,l(t(Y)[i].name)+`:`,1),r(`span`,ye,l(n),1)]))),128)),Object.keys(c.report.defenderLosses.fleet).length===0&&Object.keys(c.report.defenderLosses.defense).length===0?(o(),e(`p`,be,l(t(q)(`messagesView.noLosses`)),1)):m(``,!0)])])]),c.report.attackerRemaining||c.report.defenderRemaining?(o(),e(`div`,xe,[c.report.attackerRemaining&&Object.keys(c.report.attackerRemaining).length>0?(o(),e(`div`,Se,[r(`p`,Ce,l(t(q)(`messagesView.attackerRemaining`)),1),r(`div`,we,[(o(!0),e(n,null,a(c.report.attackerRemaining,(n,i)=>(o(),e(`div`,{key:i},[r(`span`,Te,l(t(J)[i].name)+`:`,1),r(`span`,Ee,l(n),1)]))),128))])])):m(``,!0),c.report.defenderRemaining&&(Object.keys(c.report.defenderRemaining.fleet||{}).length>0||Object.keys(c.report.defenderRemaining.defense||{}).length>0)?(o(),e(`div`,De,[r(`p`,Oe,l(t(q)(`messagesView.defenderRemaining`)),1),r(`div`,ke,[(o(!0),e(n,null,a(c.report.defenderRemaining.fleet,(n,i)=>(o(),e(`div`,{key:i},[r(`span`,Ae,l(t(J)[i].name)+`:`,1),r(`span`,je,l(n),1)]))),128)),(o(!0),e(n,null,a(c.report.defenderRemaining.defense,(n,i)=>(o(),e(`div`,{key:i},[r(`span`,Me,l(t(Y)[i].name)+`:`,1),r(`span`,Ne,l(n),1)]))),128))])])):m(``,!0)])):m(``,!0),r(`div`,Pe,[c.report.plunder&&(c.report.plunder.metal>0||c.report.plunder.crystal>0||c.report.plunder.deuterium>0)?(o(),e(`div`,Fe,[r(`p`,Ie,l(t(q)(`messagesView.plunder`)),1),r(`div`,Le,[c.report.plunder.metal>0?(o(),e(`span`,Re,[s(x,{type:`metal`,size:`sm`}),p(` `+l(t(b)(c.report.plunder.metal)),1)])):m(``,!0),c.report.plunder.crystal>0?(o(),e(`span`,ze,[s(x,{type:`crystal`,size:`sm`}),p(` `+l(t(b)(c.report.plunder.crystal)),1)])):m(``,!0),c.report.plunder.deuterium>0?(o(),e(`span`,Be,[s(x,{type:`deuterium`,size:`sm`}),p(` `+l(t(b)(c.report.plunder.deuterium)),1)])):m(``,!0)])])):m(``,!0),c.report.debrisField&&(c.report.debrisField.metal>0||c.report.debrisField.crystal>0)?(o(),e(`div`,Ve,[r(`p`,He,l(t(q)(`messagesView.debrisField`)),1),r(`div`,Ue,[c.report.debrisField.metal>0?(o(),e(`span`,We,[s(x,{type:`metal`,size:`sm`}),p(` `+l(t(b)(c.report.debrisField.metal)),1)])):m(``,!0),c.report.debrisField.crystal>0?(o(),e(`span`,Ge,[s(x,{type:`crystal`,size:`sm`}),p(` `+l(t(b)(c.report.debrisField.crystal)),1)])):m(``,!0)]),c.report.moonChance&&c.report.moonChance>0?(o(),e(`p`,Ke,l(t(q)(`messagesView.moonChance`))+`: `+l((c.report.moonChance*100).toFixed(1))+`% `,1)):m(``,!0)])):m(``,!0)]),c.report.roundDetails&&c.report.roundDetails.length>0?(o(),e(`div`,qe,[s(t(oe),{onClick:d[0]||=e=>Z.value=!Z.value,variant:`outline`,size:`sm`,class:`w-full`},{default:f(()=>[p(l(Z.value?t(q)(`messagesView.hideRoundDetails`):t(q)(`messagesView.showRoundDetails`)),1)]),_:1}),Z.value?(o(),e(`div`,Je,[d[3]||=r(`div`,{class:`absolute left-2 top-0 bottom-0 w-0.5 bg-border`},null,-1),(o(!0),e(n,null,a(c.report.roundDetails,i=>(o(),e(`div`,{key:i.round,class:`relative`},[d[2]||=r(`div`,{class:`absolute -left-6 top-3 w-4 h-4 rounded-full bg-primary border-2 border-background`},null,-1),r(`div`,Ye,[r(`div`,Xe,[r(`p`,Ze,l(t(q)(`messagesView.round`).replace(`{round}`,String(i.round))),1),s(t(g),{"delay-duration":300},{default:f(()=>[r(`div`,Qe,[s(t(_),null,{default:f(()=>[s(t(y),{"as-child":``},{default:f(()=>[r(`span`,$e,[s(t(ne),{class:`h-3 w-3`}),p(` `+l(t(b)(i.attackerRemainingPower)),1)])]),_:2},1024),s(t(v),null,{default:f(()=>[r(`p`,null,l(t(q)(`messagesView.attackerRemainingPower`)),1)]),_:1})]),_:2},1024),s(t(_),null,{default:f(()=>[s(t(y),{"as-child":``},{default:f(()=>[r(`span`,et,[s(t(re),{class:`h-3 w-3`}),p(` `+l(t(b)(i.defenderRemainingPower)),1)])]),_:2},1024),s(t(v),null,{default:f(()=>[r(`p`,null,l(t(q)(`messagesView.defenderRemainingPower`)),1)]),_:1})]),_:2},1024)])]),_:2},1024)]),r(`div`,tt,[r(`div`,nt,[r(`p`,rt,l(t(q)(`messagesView.attackerLosses`)),1),r(`div`,it,[(o(!0),e(n,null,a(i.attackerLosses,(n,i)=>(o(),e(`div`,{key:i,class:`flex justify-between`},[r(`span`,at,l(t(J)[i].name),1),r(`span`,ot,`-`+l(n),1)]))),128)),Object.keys(i.attackerLosses).length===0?(o(),e(`p`,st,l(t(q)(`messagesView.noLosses`)),1)):m(``,!0)])]),r(`div`,ct,[r(`p`,lt,l(t(q)(`messagesView.defenderLosses`)),1),r(`div`,ut,[(o(!0),e(n,null,a(i.defenderLosses.fleet,(n,i)=>(o(),e(`div`,{key:i,class:`flex justify-between`},[r(`span`,dt,l(t(J)[i].name),1),r(`span`,U,`-`+l(n),1)]))),128)),(o(!0),e(n,null,a(i.defenderLosses.defense,(n,i)=>(o(),e(`div`,{key:i,class:`flex justify-between`},[r(`span`,ft,l(t(Y)[i].name),1),r(`span`,pt,`-`+l(n),1)]))),128)),Object.keys(i.defenderLosses.fleet).length===0&&Object.keys(i.defenderLosses.defense).length===0?(o(),e(`p`,mt,l(t(q)(`messagesView.noLosses`)),1)):m(``,!0)])])])])]))),128))])):m(``,!0)])):m(``,!0)])):m(``,!0)]),_:1})]),_:1},8,[`open`]))}});export{W as t};