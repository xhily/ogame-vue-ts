import{At as e,Cn as t,Ct as n,Dt as r,Jt as i,Kt as a,Mt as o,Nt as ee,On as s,Ot as c,Tn as te,V as l,Wt as ne,hn as u,in as d,jt as f,kt as p,z as re}from"./game-logic-CfBcTF_c.js";import"./vendor-pinia-DP9x75p8.js";import{o as ie}from"./vendor-vue-router-CWDMmE-U.js";import"./vendor-crypto-Ce_BCn-h.js";import"./game-i18n-DEf7ySVe.js";import"./vendor-others-CUjrprN5.js";import"./vendor-reka-ui-CZQh7FLl.js";import"./vendor-utils-Dg-HLkEU.js";import"./vendor-vueuse-C7EbLx--.js";import{I as ae,_ as oe,c as se,j as m,v as ce}from"./vendor-icons-W6Ny__75.js";import{t as le}from"./TooltipProvider-BAp4BAXy.js";import{t as ue}from"./CardDescription-D2AN1hhX.js";import"./game-config-D-D7cMgJ.js";import{A as h,D as g,E as _,F as de,I as fe,M as v,P as pe,T as y,c as b,l as x,r as S,s as C,t as w,u as T}from"./index-DWmvUlvu.js";import{t as me}from"./AlertDialog-CiXBEnQ0.js";import{a as E,i as D,n as O,r as k,t as A}from"./SelectValue-Cm2l40Fd.js";var he={class:`container mx-auto p-4 sm:p-6 space-y-4 sm:space-y-6`},j={class:`text-2xl sm:text-3xl font-bold`},M={class:`grid grid-cols-2 sm:grid-cols-3 gap-3 sm:gap-4`},N={class:`space-y-2`},P={class:`space-y-2`},F={class:`col-span-2 sm:col-span-1 flex items-end`},I={class:`space-y-2`},L={class:`w-8 sm:w-12 text-center`},R={class:`flex-1 min-w-0`},z={key:0,class:`space-y-1`},ge={class:`flex items-center gap-2`},_e={class:`font-semibold text-sm sm:text-base truncate`},ve={class:`text-xs text-muted-foreground`},ye={key:1,class:`text-sm text-muted-foreground`},be={key:2,class:`mt-2 p-2 bg-amber-50 dark:bg-amber-950/30 border border-amber-200 dark:border-amber-800 rounded text-xs`},xe={class:`flex items-center gap-2 text-amber-700 dark:text-amber-400 font-medium mb-1`},Se={class:`flex gap-3 text-xs`},Ce={class:`flex items-center gap-1`},we={class:`text-muted-foreground`},Te={class:`font-medium`},Ee={class:`flex items-center gap-1`},De={class:`text-muted-foreground`},Oe={class:`font-medium`},ke={class:`flex gap-1 sm:gap-2 flex-shrink-0`},B=ee({__name:`GalaxyView`,setup(ee){let B=fe(),V=de(),H=ie(),{t:U}=pe(),W=u(null),G=u(1),K=u(1),q=u(1),J=u(1),Y=u([]);ne(()=>{B.currentPlanet&&(q.value=B.currentPlanet.position.galaxy,J.value=B.currentPlanet.position.system,G.value=q.value,K.value=J.value,Z())});let Ae=(e,t)=>l(e,t).map(n=>{let r=re(e,t,n.position),i=B.player.planets.find(r=>r.position.galaxy===e&&r.position.system===t&&r.position.position===n.position)||V.planets[r]||null;return{position:n.position,planet:i}}),X=(e,t,n)=>{let r=`debris_${e}_${t}_${n}`;return V.debrisFields[r]||null},Z=()=>{q.value=G.value,J.value=K.value,Y.value=Ae(q.value,J.value)},je=()=>{B.currentPlanet&&(q.value=B.currentPlanet.position.galaxy,J.value=B.currentPlanet.position.system,G.value=q.value,K.value=J.value,Z())},Q=e=>e?e.ownerId===B.player.id:!1,Me=e=>{B.currentPlanetId=e,H.push(`/`)},$=(e,t,n)=>{let r=e?e.position:{galaxy:q.value,system:J.value,position:n},i=`${r.galaxy}:${r.system}:${r.position}`,a=``,o=``;t===`spy`?(o=U(`galaxyView.scoutPlanetTitle`),a=U(`galaxyView.scoutPlanetMessage`).replace(`{coordinates}`,i)):t===`attack`?(o=U(`galaxyView.attackPlanetTitle`),a=U(`galaxyView.attackPlanetMessage`).replace(`{coordinates}`,i)):t===`colonize`?(o=U(`galaxyView.colonizePlanetTitle`),a=U(`galaxyView.colonizePlanetMessage`).replace(`{coordinates}`,i)):t===`recycle`&&(o=U(`galaxyView.recyclePlanetTitle`),a=U(`galaxyView.recyclePlanetMessage`).replace(`{coordinates}`,i)),W.value?.show({title:o,message:a,onConfirm:()=>{H.push({path:`/fleet`,query:{galaxy:r.galaxy,system:r.system,position:r.position,mission:t}})}})};return(ee,l)=>(a(),e(`div`,he,[r(`h1`,j,s(t(U)(`galaxyView.title`)),1),o(t(T),null,{default:d(()=>[o(t(b),null,{default:d(()=>[o(t(C),null,{default:d(()=>[f(s(t(U)(`galaxyView.selectCoordinates`)),1)]),_:1})]),_:1}),o(t(x),null,{default:d(()=>[r(`div`,M,[r(`div`,N,[o(t(w),{for:`select-galaxy`,class:`text-xs sm:text-sm`},{default:d(()=>[f(s(t(U)(`galaxyView.galaxy`)),1)]),_:1}),(a(),c(t(E),{key:t(B).locale,"model-value":String(G.value),"onUpdate:modelValue":l[0]||=e=>{G.value=Number(e),Z()}},{default:d(()=>[o(t(O),{id:`select-galaxy`,class:`w-full`},{default:d(()=>[o(t(A),{placeholder:t(U)(`galaxyView.selectGalaxy`)},null,8,[`placeholder`])]),_:1}),o(t(D),null,{default:d(()=>[(a(),e(n,null,i(9,e=>o(t(k),{key:e,value:String(e)},{default:d(()=>[f(s(t(U)(`galaxyView.galaxy`))+` `+s(e),1)]),_:2},1032,[`value`])),64))]),_:1})]),_:1},8,[`model-value`]))]),r(`div`,P,[o(t(w),{for:`select-system`,class:`text-xs sm:text-sm`},{default:d(()=>[f(s(t(U)(`galaxyView.system`)),1)]),_:1}),(a(),c(t(E),{key:`${t(B).locale}-system`,"model-value":String(K.value),"onUpdate:modelValue":l[1]||=e=>{K.value=Number(e),Z()}},{default:d(()=>[o(t(O),{id:`select-system`,class:`w-full`},{default:d(()=>[o(t(A),{placeholder:t(U)(`galaxyView.selectSystem`)},null,8,[`placeholder`])]),_:1}),o(t(D),null,{default:d(()=>[(a(),e(n,null,i(10,e=>o(t(k),{key:e,value:String(e)},{default:d(()=>[f(s(t(U)(`galaxyView.system`))+` `+s(e),1)]),_:2},1032,[`value`])),64))]),_:1})]),_:1},8,[`model-value`]))]),r(`div`,F,[o(t(v),{onClick:je,variant:`outline`,class:`w-full`},{default:d(()=>[o(t(m),{class:`h-4 w-4 mr-2`}),f(` `+s(t(U)(`galaxyView.myPlanet`)),1)]),_:1})])])]),_:1})]),_:1}),o(t(T),null,{default:d(()=>[o(t(b),null,{default:d(()=>[o(t(C),null,{default:d(()=>[f(s(t(U)(`galaxyView.galaxy`))+` `+s(q.value)+`:`+s(J.value),1)]),_:1}),o(t(ue),null,{default:d(()=>[f(s(t(U)(`galaxyView.totalPositions`)),1)]),_:1})]),_:1}),o(t(x),null,{default:d(()=>[r(`div`,I,[(a(!0),e(n,null,i(Y.value,n=>(a(),e(`div`,{key:n.position,class:te([`flex items-center gap-2 sm:gap-4 p-2 sm:p-3 border rounded-lg hover:bg-muted/50 transition-colors`,{"bg-blue-50 dark:bg-blue-950 border-blue-300 dark:border-blue-700":Q(n.planet),"bg-muted/30":!n.planet}])},[r(`div`,L,[o(t(h),{variant:`outline`,class:`text-xs sm:text-sm`},{default:d(()=>[f(s(n.position),1)]),_:2},1024)]),r(`div`,R,[n.planet?(a(),e(`div`,z,[r(`div`,ge,[r(`h3`,_e,s(n.planet.name),1),Q(n.planet)?(a(),c(t(h),{key:0,variant:`default`,class:`text-xs`},{default:d(()=>[f(s(t(U)(`galaxyView.mine`)),1)]),_:1})):(a(),c(t(h),{key:1,variant:`secondary`,class:`text-xs`},{default:d(()=>[f(s(t(U)(`galaxyView.hostile`)),1)]),_:1}))]),r(`p`,ve,` [`+s(n.planet.position.galaxy)+`:`+s(n.planet.position.system)+`:`+s(n.planet.position.position)+`] `,1)])):(a(),e(`div`,ye,s(t(U)(`galaxyView.emptySlot`)),1)),X(q.value,J.value,n.position)?(a(),e(`div`,be,[r(`div`,xe,[r(`span`,null,s(t(U)(`galaxyView.debrisField`)),1)]),r(`div`,Se,[r(`span`,Ce,[r(`span`,we,s(t(U)(`resources.metal`))+`:`,1),r(`span`,Te,s(t(S)(X(q.value,J.value,n.position).resources.metal)),1)]),r(`span`,Ee,[r(`span`,De,s(t(U)(`resources.crystal`))+`:`,1),r(`span`,Oe,s(t(S)(X(q.value,J.value,n.position).resources.crystal)),1)])])])):p(``,!0)]),r(`div`,ke,[o(t(le),{"delay-duration":300},{default:d(()=>[n.planet&&!Q(n.planet)?(a(),c(t(g),{key:0},{default:d(()=>[o(t(y),{"as-child":``},{default:d(()=>[o(t(v),{onClick:e=>$(n.planet,`spy`),variant:`outline`,size:`sm`,class:`h-8 w-8 p-0`},{default:d(()=>[o(t(ae),{class:`h-3 w-3 sm:h-4 sm:w-4`})]),_:1},8,[`onClick`])]),_:2},1024),o(t(_),null,{default:d(()=>[r(`p`,null,s(t(U)(`galaxyView.scout`)),1)]),_:1})]),_:2},1024)):p(``,!0),n.planet&&!Q(n.planet)?(a(),c(t(g),{key:1},{default:d(()=>[o(t(y),{"as-child":``},{default:d(()=>[o(t(v),{onClick:e=>$(n.planet,`attack`),variant:`outline`,size:`sm`,class:`h-8 w-8 p-0`},{default:d(()=>[o(t(se),{class:`h-3 w-3 sm:h-4 sm:w-4`})]),_:1},8,[`onClick`])]),_:2},1024),o(t(_),null,{default:d(()=>[r(`p`,null,s(t(U)(`galaxyView.attack`)),1)]),_:1})]),_:2},1024)):p(``,!0),n.planet?p(``,!0):(a(),c(t(g),{key:2},{default:d(()=>[o(t(y),{"as-child":``},{default:d(()=>[o(t(v),{onClick:e=>$(null,`colonize`,n.position),variant:`outline`,size:`sm`,class:`h-8 w-8 p-0`},{default:d(()=>[o(t(oe),{class:`h-3 w-3 sm:h-4 sm:w-4`})]),_:1},8,[`onClick`])]),_:2},1024),o(t(_),null,{default:d(()=>[r(`p`,null,s(t(U)(`galaxyView.colonize`)),1)]),_:1})]),_:2},1024)),n.planet&&Q(n.planet)?(a(),c(t(g),{key:3},{default:d(()=>[o(t(y),{"as-child":``},{default:d(()=>[o(t(v),{onClick:e=>Me(n.planet.id),variant:`outline`,size:`sm`,class:`h-8 w-8 p-0`},{default:d(()=>[o(t(m),{class:`h-3 w-3 sm:h-4 sm:w-4`})]),_:1},8,[`onClick`])]),_:2},1024),o(t(_),null,{default:d(()=>[r(`p`,null,s(t(U)(`galaxyView.switch`)),1)]),_:1})]),_:2},1024)):p(``,!0),X(q.value,J.value,n.position)?(a(),c(t(g),{key:4},{default:d(()=>[o(t(y),{"as-child":``},{default:d(()=>[o(t(v),{onClick:e=>$(n.planet,`recycle`,n.position),variant:`outline`,size:`sm`,class:`h-8 w-8 p-0`},{default:d(()=>[o(t(ce),{class:`h-3 w-3 sm:h-4 sm:w-4`})]),_:1},8,[`onClick`])]),_:2},1024),o(t(_),null,{default:d(()=>[r(`p`,null,s(t(U)(`galaxyView.recycle`)),1)]),_:1})]),_:2},1024)):p(``,!0)]),_:2},1024)])],2))),128))])]),_:1})]),_:1}),o(me,{ref_key:`actionDialog`,ref:W},null,512)]))}});export{B as default};